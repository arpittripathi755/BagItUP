<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BagItUp | Login</title>
    <link rel="stylesheet" href="login-new.css" />
</head>

<body>
    <div class="login-container">
        <div class="login-box">
            <h1 class="logo"><img src="images/newlogo-removebg-preview (2).png" alt="Logo" />BagItUp</h1>
            <h2>Welcome Back</h2>
            <p class="subtitle">Log in to continue shopping in style.</p>

            <form>
                <div class="input-group">
                    <label>Email</label>
                    <input type="email" placeholder="Enter your email" />
                </div>

                <div class="input-group">
                    <label>Password</label>
                    <input type="password" placeholder="Enter your password" />
                </div>

                <a href="home.html" class="login-btn">Login</a>
                <button type="button" class="google-btn">
                    <img src="images/google-logo.svg" alt="Google" />
                    Sign in with Google
                </button>
            </form>

            <p class="register-text">
                New to BagItUp? <a href="#">Create an account</a>
            </p>
        </div>
        <a href="home.html" class="back-to-home-btn">‚Üê Back to Home</a>
    </div>
    <script type="module" defer>
        // Import Firebase libraries
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
        import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged }
            from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

        // üîπ Replace this with your own config from Firebase Console
        const firebaseConfig = {
            apiKey: "AIzaSyC_1VN-RVkmuLN0kor2h1Qp2xqf9KziHQ8",
            authDomain: "bagitup-465b7.firebaseapp.com",
            projectId: "bagitup-465b7",
            storageBucket: "bagitup-465b7.firebasestorage.app",
            messagingSenderId: "300945011227",
            appId: "1:300945011227:web:984bd25aee7d2ca5bafebe",
            measurementId: "G-7P9FX0RKKV"
        };



        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();

        // Find your Google button
        const googleBtn = document.querySelector(".google-btn");

        // Handle sign in
        googleBtn.addEventListener("click", () => {
            signInWithPopup(auth, provider)
                .then((result) => {
                    const user = result.user;
                    console.log("‚úÖ Logged in as:", user.displayName);

                    // Optional: save user info locally
                    localStorage.setItem("bagitup-user", JSON.stringify({
                        name: user.displayName,
                        email: user.email,
                        photo: user.photoURL,
                        uid: user.uid
                    }));

                    // Redirect after login
                    window.location.href = "home.html"; // change to your actual home page
                })
                .catch((error) => {
                    console.error("‚ùå Login failed:", error.message);
                    alert("Google sign-in failed. Please try again.");
                });
        });

        // Optional: auto-redirect if already signed in
        onAuthStateChanged(auth, (user) => {
            if (user) {
                console.log(user)
            }
        });

    </script>

</body>

</html>